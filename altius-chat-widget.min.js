!function(){const n=document.createElement("style");n.textContent='@keyframes pulse {\n  0%,\n  80%,\n  100% {\n    opacity: 0.3;\n    transform: scale(0.8);\n  }\n  40% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n/* Main widget container */\n#chat-widget {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 10000;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n  width: 350px;\n  height: 570px;\n  pointer-events: none;\n}\n\n/* Chat button */\n#chat-button {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 60px;\n  height: 60px;\n  background: #f44336;\n  border-radius: 50%;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  z-index: 3;\n  border: none;\n  padding: 0;\n  pointer-events: auto;\n}\n\n#chat-button:hover {\n  transform: scale(1.05);\n}\n\n#chat-button:active {\n  transform: scale(0.95);\n}\n\n#chat-button svg {\n  display: block;\n}\n\n/* Chat window */\n#chat-window {\n  position: absolute;\n  right: 0;\n  bottom: 70px;\n  width: 350px;\n  height: 500px;\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n  flex-direction: column;\n  overflow: hidden;\n  border: 1px solid #e1e8ed;\n  z-index: 2;\n  display: none;\n  pointer-events: auto;\n}\n\n/* Header */\n#chat-window .header {\n  background: #19c6c2;\n  color: white;\n  padding: 16px 20px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  border-radius: 16px 16px 0 0;\n}\n\n#chat-window .header .avatar {\n  width: 40px;\n  height: 40px;\n  background: #fff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  font-size: 20px;\n  color: #19c6c2;\n  border: 2px solid #e1e8ed;\n}\n\n#chat-window .header .title-text {\n  font-weight: 600;\n  font-size: 18px;\n  color: #fff;\n}\n\n#chat-close {\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  opacity: 0.8;\n  transition: opacity 0.2s;\n}\n\n#chat-close:hover {\n  opacity: 1;\n}\n\n#chat-close:active {\n  transform: scale(0.95);\n}\n\n/* Messages container */\n#chat-messages {\n  flex: 1;\n  padding: 16px;\n  overflow-y: auto;\n  background: #f8fafd;\n}\n\n#chat-messages::-webkit-scrollbar {\n  width: 6px;\n}\n\n#chat-messages::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n\n#chat-messages::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 3px;\n}\n\n#chat-messages::-webkit-scrollbar-thumb:hover {\n  background: #a8a8a8;\n}\n\n/* Timestamp */\n.timestamp {\n  text-align: center;\n  margin-bottom: 16px;\n}\n\n.timestamp span {\n  font-size: 12px;\n  color: #999;\n  background: white;\n  padding: 4px 12px;\n  border-radius: 12px;\n  display: inline-block;\n}\n\n/* System message */\n.system-message {\n  text-align: center;\n  margin-bottom: 16px;\n}\n\n.system-message span {\n  font-size: 12px;\n  color: #999;\n}\n\n/* Message bubbles */\n.message {\n  display: flex;\n  margin-bottom: 14px;\n  gap: 0;\n}\n\n.message .content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.message.user {\n  justify-content: flex-end;\n}\n\n.message.user .content {\n  align-items: flex-end;\n}\n\n.sender-label {\n  font-size: 12px;\n  color: #888;\n  margin-bottom: 4px;\n  font-weight: 500;\n}\n\n.message .bubble {\n  background: #f0f8ff;\n  border: 1px solid #d1e7ff;\n  color: #333;\n  padding: 12px 16px 14px 16px;\n  border-radius: 18px 18px 18px 4px;\n  font-size: 14px;\n  line-height: 1.5;\n  max-width: 85%;\n  min-width: 120px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n  word-break: break-word;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n.message.user .bubble {\n  background: #e6f4ff;\n  border: 1px solid #90caf9;\n  color: #222;\n  border-radius: 18px 18px 4px 18px;\n  box-shadow: 0 2px 8px rgba(144, 202, 249, 0.15);\n}\n\n.message.user .bubble .bubble-time {\n  color: #888;\n}\n\n.message.user .bubble .bubble-content {\n  color: #222;\n}\n\n.bubble-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 4px;\n  font-size: 12px;\n}\n\n.bubble-time {\n  font-size: 12px;\n  color: #999;\n  margin-left: 10px;\n}\n\n.bubble-content {\n  font-size: 14px;\n  color: #333;\n  margin-top: 0;\n}\n\n/* Hilangkan avatar */\n.message .avatar {\n  display: none !important;\n}\n\n/* Loading indicator */\n#loading-indicator {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n\n#loading-indicator .dots {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n#loading-indicator .dot {\n  width: 8px;\n  height: 8px;\n  background: #4285f4;\n  border-radius: 50%;\n  animation: pulse 1.5s ease-in-out infinite;\n}\n\n#loading-indicator .dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n#loading-indicator .dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n/* Input area */\n.input-area {\n  padding: 16px;\n  border-top: 1px solid #e9ecef;\n  background: white;\n}\n\n.input-container {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  background: #f8fafd;\n  border-radius: 24px;\n  padding: 8px 16px;\n  border: 1px solid #e1e8ed;\n}\n\n#chat-input {\n  flex: 1;\n  border: none;\n  background: none;\n  padding: 8px 0;\n  font-size: 14px;\n  outline: none;\n  font-family: inherit;\n  color: #333;\n}\n\n#chat-input:focus {\n  border-color: #19c6c2 !important;\n  box-shadow: 0 0 0 2px rgba(25, 198, 194, 0.2) !important;\n}\n\n#chat-send {\n  width: 36px;\n  height: 36px;\n  background: #19c6c2;\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  flex-shrink: 0;\n}\n\n#chat-send:hover {\n  transform: scale(1.05);\n}\n\n#chat-send:active {\n  transform: scale(0.95);\n}\n\n#chat-send:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none !important;\n}\n\n.bubble-initial {\n  font-size: 13px;\n  color: #888;\n  font-weight: 500;\n  margin-bottom: 6px;\n  text-align: left;\n}\n',document.head.appendChild(n)}(),(()=>{let n=!1,e=!1;async function t(n){await async function(){if(!window.session_id||""===window.session_id)try{const n=await fetch("https://aionegml-dev-c3aqcqg7abhhb2ag.southeastasia-01.azurewebsites.net/create_session",{method:"GET",headers:{"qubisa-token-key":window.chat_api_key}});if(!n.ok)throw new Error("Failed to create session");{const e=await n.json();window.session_id=e.session_id}}catch(n){throw console.error("Error creating session:",n),n}}();try{const e=await fetch("https://aionegml-dev-c3aqcqg7abhhb2ag.southeastasia-01.azurewebsites.net/chat",{method:"POST",headers:{"Content-Type":"application/json","qubisa-token-key":window.chat_api_key},body:JSON.stringify({session_id:window.session_id,prompt:n,user_profile:window.personal_data})});if(e.ok){return(await e.json()).response}throw new Error("Failed to send message")}catch(n){return console.error("Error sending message:",n),"Maaf, terjadi kesalahan. Silakan coba lagi."}}function i(n,e=!1,t=!1){const i=document.getElementById("chat-messages"),a=`\n    <div class="message${e?" user":""}">\n      <div class="bubble">\n        ${`<div class="bubble-header"><span class="sender-label">${e?"You":"Assistant"}</span><span class="bubble-time">${(new Date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}</span></div>`}\n        ${`<div class="bubble-content">${n}</div>`}\n      </div>\n    </div>\n  `;i.insertAdjacentHTML("beforeend",a),i.scrollTop=i.scrollHeight}function a(){const n=document.getElementById("loading-indicator");n&&n.remove()}async function o(){const n=document.getElementById("chat-input"),o=document.getElementById("chat-send"),s=n.value.trim();if(s&&!e){i(s,!0),n.value="",e=!0,o.disabled=!0,function(){const n=document.getElementById("chat-messages");n.insertAdjacentHTML("beforeend",'\n    <div id="loading-indicator">\n      <div class="content">\n        <div class="bubble">\n          <div class="dots">\n            <div class="dot"></div>\n            <div class="dot"></div>\n            <div class="dot"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '),n.scrollTop=n.scrollHeight}();try{const n=await t(s);a(),i(n)}catch(n){a(),i("Maaf, terjadi kesalahan. Silakan coba lagi.")}finally{e=!1,o.disabled=!1}}}function s(){const e=document.getElementById("chat-window"),t=document.getElementById("icon-chat"),i=document.getElementById("icon-close");n=!n,e.style.display=n?"flex":"none",t.style.display=n?"none":"block",i.style.display=n?"block":"none",n&&setTimeout(()=>{document.getElementById("chat-input").focus()},100)}function d(){if(!window.chat_api_key)return void console.error("Altius Chat Widget: chat_api_key is required");if(!window.personal_data)return void console.error("Altius Chat Widget: personal_data is required");document.body.insertAdjacentHTML("beforeend",'\n    <div id="chat-widget">\n      <div id="chat-window">\n        <div class="header">\n          <div class="avatar">V</div>\n          <div class="title">\n            <div class="title-text">Digital Assistant</div>\n          </div>\n        </div>\n        <div id="chat-messages"></div>\n        <div class="input-area">\n          <div class="input-container">\n            <input id="chat-input" type="text" placeholder="Type here..." />\n            <button id="chat-send" disabled>\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="white">\n                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div id="chat-button">\n        <span id="icon-chat" style="display: block;">\n          <svg width="48" height="48" viewBox="0 0 48 48" fill="none">\n            <circle cx="24" cy="24" r="24" fill="#F44336"/>\n            <path d="M34 16a2 2 0 0 0-2-2H16a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10l4 4v-4h2a2 2 0 0 0 2-2V16z" fill="white"/>\n            <rect x="18" y="20" width="12" height="2" rx="1" fill="#F44336"/>\n            <rect x="18" y="24" width="8" height="2" rx="1" fill="#F44336"/>\n          </svg>\n        </span>\n        <span id="icon-close" style="display: none;">\n          <svg width="48" height="48" viewBox="0 0 48 48" fill="none">\n            <circle cx="24" cy="24" r="24" fill="#F44336"/>\n            <path d="M16 16L32 32M32 16L16 32" stroke="white" stroke-width="3" stroke-linecap="round"/>\n          </svg>\n        </span>\n      </div>\n    </div>\n  '),i("Halo! Saya adalah asisten virtual AI anda. ada yang bisa saya bantu ?",!1,!0),document.getElementById("chat-button").addEventListener("click",s),document.getElementById("chat-send").addEventListener("click",o);const n=document.getElementById("chat-input"),t=document.getElementById("chat-send");n.addEventListener("input",function(){t.disabled=!this.value.trim()||e}),n.addEventListener("keypress",n=>{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),o())}),console.log("Altius Chat Widget initialized successfully")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()})();